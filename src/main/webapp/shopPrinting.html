<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>打印</title>
    <script src="js/loadcss.js" type="text/javascript" charset="utf-8"></script>
    <style>
        body {
            height: auto;
        }

        .p-price {
            width: 1024px;
            margin: 0 auto;
            text-align: right;
            padding: 20px;
            line-height: 40px;
        }

        .p-price div {
            font-size: 18px;
        }

        .p-title {
            font-size: 20px;
        }

        #sign {
            display: inline-block;
            width: 150px;
            border-bottom: 1px #0C0C0C solid;
        }
    </style>
</head>
<body>
<div class="tab-box" style="width: 1024px; margin: 0 auto">
    <table id="shopPrinting" lay-filter="shopPrinting" class="layui-table"></table>
</div>
<div class="p-price">
    <div>酒店地址：<span id="addr"></span></div>
    <div>酒店电话：<span id="phone"></span></div>
    <div>签字：<span id="sign"></span></div>
    <div>打印时间：<span id="time"></span></div>
</div>
<script src="js/loadjs.js" type="text/javascript" charset="utf-8"></script>
<script>
    layui.use(['table'], function () {
        var $ = layui.$, table = layui.table, id = 0;

        $(function () {
            id = parseInt(getUrl('id'));
            getResult();
            console.log(id);
        });

        function getResult() {
            $.ajax({
                url: api.cashStamp,
                type: 'POST',
                dataType: 'json',
                data: {
                    id: id
                },
                success: function (data) {
                    $('#addr').html(data.data.hotelBO.address);
                    $('#phone').html(data.data.hotelBO.phoneNumber);
                    $('#time').html(DateToLStr(new Date(data.data.time.time)));
                    var arr = [];
                    arr.push(data.data.lst);
                    tab.reload({data: JSON.parse(JSON.stringify(arr))});
                }
            })
        }

        var tab = table.render({
            elem: '#shopPrinting' //指定原始表格元素选择器（推荐id选择器）
            , even: true
            , loading: true // 是否显示加载条
            , cols: [[ //标题栏
                {field: 'orderNum', title: '订单号'},
                {field: 'price', title: '消费金额'},
                {field: 'info', title: '消费详情'},
                {
                    field: 'type', title: '消费类型', templet: function (data) {
                        switch (data.type) {
                            case "1":
                                return '商品';
                            case "2":
                                return '赔偿';
                            case "3":
                                return '办卡';
                        }
                    }
                },
                {
                    field: 'state', title: '支付方式', templet: function (data) {
                        switch (data.state) {
                            case 1:
                                return '现金';
                            case 2:
                                return 'POS';
                            case 3:
                                return '其他支付';
                            case 4:
                                return '积分支付';
                            case 5:
                                return '储值支付';
                        }
                    }
                }
            ]]
        });
    });
</script>
</body>
</html>